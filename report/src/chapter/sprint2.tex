\chapter{Sprint 2}

\minitoc

\subsubsection{Purpose}

This chapter will outline the work we did in the second sprint. It explains in detail how we planned the sprint, including which user stories we chose and the architecture we employed to implement these. Details on the implementation on each user story is also included, as well documentation on the testing process. Finally our evaluation of the second sprint is presented. 

\clearpage

\section{Planning}

\subsection{Duration}
This sprint started on October 8th and will last for two weeks. A customer demo will be held at October 18th to show of what we have achieved during the sprint and to ensure that the customer agrees with the solutions and the direction we are going in.

\subsection{Sprint Goal}
The goal of the second sprint is to increase the functionality of the console. We will try to include user stories that add functionality that is easy to use and is valuable for the end user. The user stories concerned with domain specifics of the system, like implementing support for adding users to the library, will be left untouched in this sprint.

\subsection{Sprint Backlog}
The user stories we chose to include in the sprint backlog with their estimated workload is listed in Table~\ref{table:sp2backlog}. As of this sprint we tried to split each user story in the sprint backlog into smaller sub- tasks that could be distributed easily amonst the group members. Each estimate for the subtasks includes design and implementation of the solution. Testing includes writing unit tests as we code, write test cases and to perform them. Documentation includes all the work necessary to document our work on that user story in the report. For this sprint we had 110 hours available for the sprint, exluding work on the report, project management, sprint planning and evaluation. Its a bit less than normal as we decided to put in some extra work on the pre- delivery of the report on October 14th.
\newline
\newline
The decision to make smaller sub- tasks turned out to be succesful, as we were able to estimate the workload more precisly than we did in the last sprint. The tasks were much more detailed as well, instead of general tasks such as "Design" and "Implementation". We experienced that it was easier to estimate the tasks when they represented something concise, and to achieve this they needed to be small enough.
\newline
\newline
There is still room for improvement, as the estimates on some of the sub- tasks were somewhat far away from the actual time used. The tasks that we felt were the most difficult to estimate were the bigger ones. We generally spent less time than planned on these, and we feel that the reason for this was that we failed to break these down to small enough packages. Our general feeling is that the smaller and more concise the tasks are, the better we are able to estimate them. For the next sprint we should make an effort to do more of the same, and try to make the tasks as small and concise as possible and avoid big and general ones.
\newline
\newline
We used less time on the user stories than we planned for this sprint, and a big part of this was due to the pre- delivery of the report. We failed to properly estimate the workload of this delivery, and as a result we had less time available for the user stories. Luckily we were able to finish them using with the time available, mostly because some of the tasks were easier to accomplish than we originally thought. However, this may not be the case in the following sprints. Thats why we feel its important to get the estimates even more precise, so we know exactly how much effort its going to take to achieve the goals we set for the sprints. 

\begin{table}
\caption{Sprint 2 Backlog}
\centering
\begin{tabular}{ l p{8cm} l l }
\hline 
			&				&\multicolumn{2}{c}{Hours}			\\
 User Story	& Short Description		&Est.		&Act.	                               \\ 
\hline \\ [-2.0ex]
 \bf{A4}     &\bf{Update to schemaless database}		&\bf{10}		&\bf{11}          \\ 
		  &Change the server implemenation		&4			&5		\\
		  &Update REST API calls					&2			&1.5		\\
		  &Testing							&2			&2.5		\\
		  &Documentation						&2			&2		\\

 \bf{G4b}     &\bf{Reflect actions from the GUI in the console} 		&\bf{11}		&\bf{13.5}               \\ 
		  &Print the commands in the console				&6			&8		\\
		  &Testing									&3			&3.5		\\
		  &Documentation								&2			&2		\\

 \bf{G7}     &\bf{Autocompletion of commands} 	&\bf{30}		&\bf{22.5}		     \\ 
		  &Add methods to list commands		&4			&2		\\
		  &Create popup menu				&10			&5		\\
		  &Update elements in menu			&4			&3		\\
		  &Make selection of commands possible&3			&3.5		\\
		  &Autocomplete on selection			&1			&1		\\
		  &Testing						&4			&5		\\
		  &Documentation					&4			&3		\\

 \bf{G10}   &\bf{Indicate the selected objects in GUI}		&\bf{26}		&\bf{17}		     \\ 
		  &Design soulution for highlighting elements	&2			&1		\\
		  &Create method for highlighting				&2			&1.5		\\
		  &Create record for selected objects			&4			&2		\\
		  &Respond to changes in selection				&8			&4		\\
		  &Highlight newly created objects				&2			&2		\\
		  &Testing								&4			&3.5		\\
		  &Documentation							&4			&3		\\

 \bf{G11}	  &\bf{Cycle through the current selection}	&\bf{25}		&\bf{18}		     \\
		  &Logic to keep track of selection			&5			&3.5		\\
		  &Update this list when selection changes	&4			&3		\\
		  &Extract objects when cycling through		&7			&4		\\
		  &Update the GUI when selection changes	&2			&2		\\
		  &Testing							&4			&3.5		\\
		  &Documentation						&3			&2		\\

\bf{G12}	  &\bf{Show details on click}			&\bf{8}		&\bf{7.5}		     \\
		  &Make ID clickable					&1			&1		\\
		  &Update relevant section on click		&2			&1.5		\\
		  &Able the user to make changes		&3			&1.5		\\
		  &Testing						&1			&2.5		\\
		  &Documentation					&1			&1		\\
\hline 
		  &\bf{Total:}						&\bf{110}		&\bf{89.5}		\\
\hline
\end{tabular}
\label{table:sp2backlog}
\end{table}


\section{Architecture}
The user stories picked out for sprint two did not have much of an impact on the architecture constructed earlier. We therefore kept using the same architecture as in sprint 1. 

\section{Implementation}

\subsection{Autocomplete}
The autocomplete is made of a jQuery suggestion menu, a modified JavaScript Shell 1.4 and the available objects in the running system. The suggestion menu is attached to the console textarea in Shell. Shell already possessed the ability to generate suggestions based on the user’s input in the console. This information is basically reflected onto the attached suggestion menu, which displays these. Since the system is to be efficient for the selected domain, the available methods and attributes have been cut down, so only the essentials remain, and the user doesn't have to look through unnecessary methods when working.

\subsection{Object highlighting and detailed editing}
It was made possible to click the ID field of book objects in order to highlight their row in the list. This action also filled out the section for adding new books with the information about the given book object. Furthermore, the section for adding new books was enhanced to allow editing of the existing object.

\subsection{Cycling through objects}
Logic was implemented in the console to detect the presence of an array in the user input, and incrementing the index of this array upon pressing the Tab key. The object at the indicated index was then highlighted for editing in the GUI. In order to detect arrays in the textual user input string, the following approach was used:
\begin{itemize}
\item If the string contains the characters '(', ')' or '=', terminate. The code later makes use of the eval() function to determine whether the array is valid, and it was deemed unsafe to risk performing function calls(indicated by the presence of parentheses) or assignment statements(indicated by the presence of an equals sign).
\item Strip complete or partial occurrences of [index] at the end of the string, where 'index' would be an integer literal. Determine the value of 'index' if it is present, set it to 0 otherwise.
\item Evaluate the resulting string and store it in a variable, then test the type of the variable. If the variable is not an array, or if it is an array containing objects that are not book objects, terminate.
\item If the book object at the previously determined index in the array is highlighted in the GUI, increment the index by one, wrapping around if necessary.
\item Add the [index] construct to the end of the string in the console, and highlight the book object at the current index in the array for editing in the GUI.
\end{itemize}

\subsection{Reflection of GUI actions in the console}
The GUI elements were altered so that they sent strings containing JavaScript code to the console for execution, and subsequently displaying the results. 

In itself, the console already contained support for programmatically executing code and displaying the result. However, to make this feasible, some specific implementations had to be altered so as to not use references that were not accessible from the global scope. For instance, the GUI elements for editing book objects were originally implemented by having the book objects create DOM elements with callbacks directly to the book object which created them. This was changed so that the GUI element instead used an index in the global array of books(which was accessible from the console) in order to obtain a reference to the correct book object.

\section{Testing}
This section will present the tests performed during the second sprint and their result.

\subsection{Test Results}
We performed a total of 9 test cases during this sprint; TID11-19. The results are listed in Table~\ref{table:sp2testresults}. The test cases themselves can be found in appendix~\ref{sec:sp2testcases}.

\begin{table}
\caption{Sprint 2 Test Results}
\centering
\begin{tabular}{ l p{13cm} }

\hline 
Item			&Description		\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID11}			\\
Description	&Storing objects on the server without a schema	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Success				\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID12}			\\
Description	&Printing commands in the console 	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Success			\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID13}			\\
Description	&Showing the popup menu	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Failure. The popup menu was displayed, but some of the attributes and methods were missing from the menu				\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID14}			\\
Description	&Selecting elements from the popup menu	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Success			\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID15}			\\
Description	&Highlighting selected objects	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Failure. Objects are not automaticly highlighted when they selected from the console. It is however possible to highlight an object from the console using a method call.	\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID16}			\\
Description	&Highlighting a group of objects\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Success			\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID17}			\\
Description	&Cycling through current selection	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Failure. It is not possible to highlight multiple objects.		\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID18}			\\
Description	&Highlighting while cycling through objects	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Success	\\
\hline \\ [-2.0ex]

\bf{TestID}		&\bf{TID19}			\\
Description	&Update separate section on clicking a book	\\
Tester		&Øystein Heimark	\\
Date			&19/10 - 2012	\\
Result		&Failure. It is not possible to edit the title of the book in the separate section		\\
\hline

\end{tabular}
\label{table:sp2testresults}
\end{table}

\subsection{Test Evaluation}
Some of our test failed this time. Most of them was due to minor bugs in the system which was easily corrected at once. The remaining failures was due to some missing functionality which was defined by the user stories and where yet to be implemented at the time the testing was performed. However we were able to add this functionality and pass all the tests before the beginning of the third sprint.

\section{Customer Feedback}
This sections covers the feedback we got from the customer, both before and after the sprint.
\newline
\newline
At the beginning of the sprint the customer had a lot of suggestions and opinions on what we should implement in this sprint, and provided us some user stories that he wanted us to implement. He suggested that our focus for this sprint should be on improving the functionality of the console, something the group also wanted to do. 
\newline
\newline
At the end of this sprint the customer was happy with the work we presented, but at the same time felt that the system was still missing something. The workflow was not as fluid as it should be, the console needed a x- factor that appealed to the user an made the console more prominent. The focus should be on adding functionality that adds value to the console. At the moment the console and its features are very programmatic. The customer told us that he would meet with other representatives from the company to talk about the direction they wanted the project to take from this point on, and to maybe find the x- factor we were looking for. We would get this feedback for the start of the third sprint.The customer also requested that we started to test our product on our peers, as feedback from users would be extremly valuable at this point of the project. He suggested that we should devote some time in the next sprint to make and perform the user testing, something the group also felt would be a good idea.

\section{Evaluation}
This section contains the evaluation of the second sprint, and what we plan to improve for the third sprint. The evaluation was performed during an internal meeting with all group members present.

\subsection{Review}

Again we were happy with the product we were able to deliver in the sprint. All the user stories in the sprint backlog were completed, and we feel like we reached the goal of extending the functionality of the console. and think that the features we implemented added great value to the console. Again the customer was happy with the end result, although he felt something was missing. This time the customer was even more included in the planning, and helped us in creating some of the user stories. This allowed them to have a greater influnce on what was to be included in this sprint.
\newline
\newline
We feel like we succeded in addressing some of the issues we faced in the previous sprint regarding our work process. The responses we created after the first sprint turned out to work quite well. Our time logging routines improved significantly, and this eased the work of documenting the workload of each user story. It also helped the team leader to oversee the progress of the sprint and to monitor the work of each of the team members.
\newline
\newline
As mentioned earlier we succeded in creating a more detailed work breakdown structure, and were able to break each user story into smaller tasks. This helped a lot when we estimated the workload of each user story, and made it easier for multiple team members to work on the same user story at once. The distribution of workload was even better than in the first sprint, and a big reason that we were able to finish all the user stories in time.
\newline
\newline
The testing proved to be more useful this time, as we uncovered multiple errors in the system and in some cases some missing functionality in some of the user stories. Although this was great and it showed that the testing surved a purpose, the timing of the testing could be improved. In this sprint we performed the test cases at the end of the sprint, and this resulted in errors discovered after the cusotmer demo. Ideally they should have been discovered and corrected before the demonstration to the customer.
\newline
\newline
Before the sprint we set out to improve the Scrum process, but we only partly succeded. We were able to organize the daily meetings, but we think there is still some improvements to be made here. We also had some technical issues during the demo which made it difficult for us to perform a proper demonstration of the features we had implemented. The technical aspect of the demo should have been prepared better, and we should always have a backup solution in case we experince problems during the demonstration.
\newline
\newline
A big downside to this sprint was the fact that we failed to estimate the workload neccessary for the pre- delivery. This ate up a lot more time than expected and as a result we were left with considerably less time for the implementation than we planned for. We were able to adjust and complete all the user stories, but we were lucky considering some of them turned out to be easier than expected.


\subsubsection{Positive Experiences}
\begin{itemize}
\item Much improved time tracking
\item Better breakdown of the user stories
\item Customer more included in the planning
\item Testing proved useful
\end{itemize}


\subsubsection{Negative Experiences}
\begin{itemize}
\item Can still improve on some parts of the Scrum process
\item Failed to estimate the workload of the pre- delivery
\item Technical issues during demostration
\item Testing performed too late
\end{itemize}

\subsection{Planned Responses}
These are the actions we have planned for the next sprint to improve our work process.

\subsubsection{Testing}
In this sprint we experienced how important the testing process can be in regards to finding errors and bugs we would otherwise fail to discover. However we performed the test cases too late to be able to correct them before the customer demonstration. Thats why we in the next sprint will perform the tests earlier, we will then manage to fix the issues in time.

\subsubsection{Demo}
For the next sprint we should properly prepare for the demo, and make it easier for the customer to follow the workflow. Also we should have a backup solution for how we are going to present our product if we experince technical difficulties again.

\subsubsection{Scrum}
Put even more effort into creating concise user stories and to break these into small tasks which can easily be distributed among the team members. We feel like this was something which contributed to the success of this sprint, and we would like to improve this even further in the next sprint. Also we aim to put more effort into the daily Scrum meetings and utilize these properly.